# SSH

The Secure Shell Protocol (SSH) is a cryptographic network protocol for operating network services securely over an unsecured network. It's most notable applications are remote login and command-line execution. <br>

SSH applications are based on a client-server architecture, connecting an SSH client instance with an SSH server. SSH operates as a layered protocol suite comprising three principal hierarchical components;

1. The transport layer provides server authentication, confidentiality and integrity
2. The user authentication protocol validates the user to the server
3. The connection protocol multiplexes the encrypted tunnel into multiple logical communication channels.

## Definition

SSH uses public-key cryptography to authenticate the remote computer and allow it to authenticate the user, if necessary. <br>

SSH may be used in several methodologies. In the simplest manner, both ends of a communication channel use automatically generated public-private key pairs to encrypt a network connection, and then use a password to authenticate the user <br>

When the public-private key pair is generated by the user manually, the authentication is essentially performed when the key pair is created, and a session may then be opened automatically without a password prompt. In this scenario, the public key is placed on all computers that must allow access to the owner of the matching private key, which the owner keeps private. While authentication is based on the private key, the key is never transferred through the network during authentication. SSH only verifies that the same person offering the public key also owns the matching private key. <br>

In all versions of SSH it is important to verify unknown public keys, i.e. associate the public keys with identities, before accepting them as valid. Accepting an attacker's public key without validation will authorize an unauthorized attacker as a valid user. <br>

## Example

While using the console, execute;

```console
ssh-keygen
```

This commands creates a `.ssh` directory and will have two files, `id_rsa` and `id_rsa.pub`. <br>

`id_rsa` = Your private key <br>
`id_rsa.pub` = Your public key <br>

During your first SSH call, another file called `known_hosts` will be created. This stores a list of servers you have previously connected to and fingerprints of their SSH keys to help verify the connection to the server is not being Man-In-The-Middled. <br>

If you're the server for the SSH connection, you have have an additional file called `authorized_keys`. This is a file on the server containing the SSH public keys of authorized users to login to the server. <br>

Once we have ran the command above, perform the following steps;

1. Place your generated public key into the servers `authorized_keys` file.
2. When you attempt to connect to the server, the server will encrypt an unknown message using your public key.
3. You then decrypt the given message using your private key and return it to the server to prove it was your public key, allowing you to access the server. In this way RSA is used as a form of authentication rather than the goal of encrypting a message inside of a public channel.